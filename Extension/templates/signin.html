<!DOCTYPE html>
<html>
<head>
    <title>OAuth Login</title>
    <style>
        .login-container {
            text-align: center;
            margin-top: 100px;
        }
        .login-btn {
            padding: 10px 20px;
            margin: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <h2>Login / Signup</h2>
        <button class="login-btn" onclick="googleLogin()">Google</button>
        <button class="login-btn" onclick="appleLogin()">Apple</button>
    </div>

    <!-- Include necessary scripts -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js"></script>
<script>
    // Google OAuth Configuration
    const GOOGLE_CLIENT_ID = '1016964115324-g2e329pu4v3au8ivhfa6791u8lpvh22k.apps.googleusercontent.com';
    
    function googleLogin() {
        const client = google.accounts.oauth2.initCodeClient({
            client_id: '1016964115324-g2e329pu4v3au8ivhfa6791u8lpvh22k.apps.googleusercontent.com',
            scope: 'https://www.googleapis.com/auth/userinfo.profile',
            ux_mode: 'redirect',
            callback: (response) => {
                // Send the authorization code to your backend
                handleGoogleResponse(response.code);
            },
            error_callback: (error) => {
                console.error('Google Login Error:', error);
            }
        });
        client.requestCode();
    }

    // Handle Google Response
    async function handleGoogleResponse(authCode) {
        try {
            // Send authCode to your backend
            const response = await fetch('/api/auth/google', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ code: authCode })
            });
            
            const data = await response.json();
            console.log('Google Auth Success:', data);
            // Handle successful login (e.g., store token, redirect)
        } catch (error) {
            console.error('Google Auth Error:', error);
        }
    }

    // Check if user is already logged in (optional)
    window.onload = function() {
        // Add your initialization logic here
    }
</script>
</body>
</html>